<mat-form-field *ngIf="categories">
  <mat-select [(ngModel)]="selectedCategory" placeholder="Scegli categoria">
    <mat-option *ngFor="let categoryType of obj.keys(categories)" [value]="categoryType">{{ categoryType | valueByKey:columnsTranslations }}</mat-option>
  </mat-select>
</mat-form-field>
<mat-form-field>
    <input matInput #filter placeholder="Filtra categoria per valore">    
</mat-form-field>  
<mat-radio-group [(ngModel)]="isActive">
  <mat-radio-button [value]="true">
    Attivo
  </mat-radio-button>
  <mat-radio-button [value]="false">
    Non attivo
  </mat-radio-button>
  <mat-radio-button [value]="undefined">
    Tutti
  </mat-radio-button>
</mat-radio-group>

<button (click)="save()" mat-raised-button>Salva</button>
<table>
  <th>Chiave</th><th>Valore</th><th>DEBUG</th><th>Attivo</th>
  <tr *ngFor="let category of categories[selectedCategory] | filterOptionsByValue | filterOptionsByState:isActive"
    [class.highlighted]="(selectedRow) && category.key == selectedRow.key">
    <td (click)="onItemClick(category, $event)">{{ category.key }}</td>
    <td *ngIf="(selectedRow) && category.key == selectedRow.key">
        <mat-form-field>
            <input matInput [(ngModel)]="category.value" #filter placeholder="Modifica" />            
        </mat-form-field>
        <button (click)="onItemClick(category, $event)" mat-icon-button>
            <mat-icon><i class="material-icons" id="done">done</i></mat-icon>
        </button>
        <button (click)="restoreAndClick(category, $event)" mat-icon-button>
            <mat-icon><i class="material-icons" id="clear">clear</i></mat-icon>
        </button>
    </td>
      
    <td (click)="onItemClick(category, $event)" *ngIf="(!selectedRow) || (selectedRow && category.key != selectedRow.key)">{{ category.value }}</td>
    <td>{{ category |json }}</td>
    <td>
      <mat-slide-toggle [(ngModel)]="category.active">      
      </mat-slide-toggle>        
    </td>
    
  </tr>
</table>
